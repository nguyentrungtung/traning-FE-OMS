<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../../src/css/style.css" />
    <link rel="stylesheet" href="../../src/css/header.css" />
    <link rel="stylesheet" href="../../src/css/footer.css" />
    <link rel="stylesheet" href="../../src/css/profilePage.css" />
    <link rel="stylesheet" href="../../src/css/responsive-common.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.js"
      integrity="sha512-K/oyQtMXpxI4+K0W7H25UopjM8pzq0yrVdFdG21Fh5dBe91I40pDd9A4lzNlHPHBIP2cwZuoxaUSX0GJSObvGA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <!-- Header -->
    <div data-include-html="../../component/header.html"></div>

    <main class="container-xxl profilePage">
      <div class="row">
        <div class="col-4">
          <div class="personalProfile">
            <h1>HỒ SƠ CÁ NHÂN</h1>
            <span class="divideH"></span>
            <ul class="accordion" id="accordionExample">
              <script>
                const listAccordionItem = [
                  {
                    p1: "Tài khoản của tôi",
                    p2: ["Hồ sơ", "Địa chỉ", "Đổi mật khẩu"],
                    link: "./profilePage/personalInformation.html",
                  },
                  {
                    p1: "Lịch sử",
                    link: "../../profilePage/historyOrder.html",
                  },
                  {
                    p1: "Đơn hàng",
                  },
                  {
                    p1: "Quản lý đổi trả",
                  },
                  {
                    p1: "Thông báo",
                  },
                  {
                    p1: "Đánh giá của tôi",
                  },
                ];
                listAccordionItem.forEach((item, index) => {
                  let contentUlCollapse = "";
                  if (item.p2) {
                    item.p2.forEach((item2) => {
                      contentUlCollapse += `<li><a class="${
                        item2 === "Hồ sơ" ? "active" : ""
                      }" href="${item.link}">${item2}</a></li>`;
                    });
                  }
                  document.write(`
                      <li class="accordion-item">
                  <a
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapse${index}"
                  >
                    <span style="gap: 12px" class="d-flex align-items-center"
                      ><img
                        src="../../assets/images/iconLeftMenuProfile${
                          index + 1
                        }.svg"
                        style="width: 24px; height: 24px; object-fit: contain"
                        alt=""
                      />
                      <span>${item.p1}</span></span
                    >
                  </a>
                  <ul
                    id="collapse${index}"
                    class="accordion-collapse collapse show"
                    data-bs-parent="#accordionExample"
                  >
                    ${contentUlCollapse}
                  </ul>
                </li>
                    `);
                });
              </script>
            </ul>
          </div>
        </div>
        <div class="col-8">
          <div class="personalInformation">
            <h1>Thông tin cá nhân</h1>
            <span class="divideH"></span>
            <div
              class="personalInformation_main d-flex flex-column"
              style="gap: 24px"
            >
              <div
                class="chooseAvatar d-flex align-items-center"
                style="gap: 16px"
              >
                <label for="chooseAvatar"
                  ><img
                    id="avatarImage"
                    src="../../assets/images/chooseImgProfile.svg"
                    alt=""
                /></label>
                <input id="chooseAvatar" type="file" accept="image/*" />
                <div
                  class="d-flex flex-column align-items-start textRight"
                  style="gap: 8px"
                >
                  <span>Ảnh đại diện</span>
                  <span>Chọn hoặc thay đổi ảnh hồ sơ của bạn</span>
                  <button id="deleteImageBtn">Xoá hình ảnh</button>
                </div>

                <script>
                  const fileInput = document.getElementById("chooseAvatar");
                  const avatarImage = document.getElementById("avatarImage");
                  const avatarLabel = document.querySelector(
                    ".chooseAvatar label"
                  );
                  const deleteImageBtn =
                    document.getElementById("deleteImageBtn");

                  fileInput.addEventListener("change", handleFileSelect);
                  deleteImageBtn.addEventListener("click", deleteImage);

                  function handleFileSelect(event) {
                    const selectedFile = event.target.files[0];

                    if (selectedFile) {
                      const reader = new FileReader();

                      reader.onload = function (event) {
                        avatarImage.src = event.target.result;
                      };

                      reader.readAsDataURL(selectedFile);
                    }
                  }

                  function deleteImage() {
                    avatarImage.src =
                      "../../assets/images/chooseImgProfile.svg";
                    fileInput.value = null; // Reset the file input
                  }
                </script>
              </div>

              <div class="nameAndPhone row">
                <div class="col-6">
                  <div
                    class="nameAndPhone_name d-flex flex-column align-items-start"
                    style="gap: 8px"
                  >
                    <span>Họ và tên</span>
                    <input type="text" placeholder="" />
                  </div>
                </div>
                <div class="col-6">
                  <div
                    class="nameAndPhone_phone d-flex flex-column align-items-start"
                    style="gap: 8px"
                  >
                    <span>Số điện thoại</span>
                    <input type="text" placeholder="" />
                  </div>
                </div>
              </div>
              <div class="dateAndGender row">
                <div class="col-6">
                  <div class="dateAndGender_date">
                    <span>Ngày sinh</span>
                    <div
                      class="d-flex align-items-center w-100"
                      style="gap: 8px"
                    >
                      <div class="dateAndGender_day item">
                        <input
                          type="text"
                          class="datepicker"
                          placeholder="Ngày"
                        />
                        <img src="../../assets/svg/chevronDown.svg" alt="" />
                      </div>
                      <div class="dateAndGender_month item">
                        <input
                          type="text"
                          class="datepicker"
                          placeholder="Tháng"
                        />
                        <img src="../../assets/svg/chevronDown.svg" alt="" />
                      </div>
                      <div class="dateAndGender_year item">
                        <input
                          type="text"
                          class="datepicker"
                          placeholder="Năm"
                        />
                        <img src="../../assets/svg/chevronDown.svg" alt="" />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="dateAndGender_gender">
                    <span>Giới tính</span>
                    <select name="gender">
                      <option value="male">Nam</option>
                      <option value="female">Nữ</option>
                      <option value="other">Khác</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="emailAndConnect row">
                <div class="col-6">
                  <div class="emailAndConnect_email">
                    <span>Email</span>
                    <input type="email" />
                  </div>
                </div>
                <div class="col-6">
                  <div class="emailAndConnect_connect">
                    <span>Liên kết mạng xã hội</span>
                    <div
                      class="w-100 d-flex align-items-center listConnect"
                      style="
                        height: 58px;
                        padding-top: 9px;
                        padding-bottom: 9px;
                        gap: 8px;
                      "
                    >
                      <button>
                        <img src="../../assets/images/connectGG.svg" alt="" />
                        <span>Google</span>
                        <span>Hủy liên kết</span>
                      </button>
                      <button>
                        <img src="../../assets/svg/Facebook.svg" alt="" />
                        <span>Facebook</span>
                        <span>Liên kết</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <button
                data-bs-toggle="modal"
                data-bs-target="#modalSaveChange"
                class="btnSaveChange align-self-start"
              >
                Lưu thay đổi
              </button>

              <div
                class="modal fade"
                id="modalSaveChange"
                tabindex="-1"
                style="display: none"
              >
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div
                      class="d-flex flex-column align-items-center"
                      style="padding: 40px 64px; position: relative; gap: 32px"
                    >
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        style="position: absolute; top: 8px; right: 8px"
                      ></button>
                      <img
                        src="../../assets/svg/StickerCapNhatSuccess.svg"
                        alt=""
                      />
                      <span
                        style="
                          width: 280px;
                          font-family: Roboto;
                          font-size: 20px;
                          font-weight: 600;
                          line-height: 28px;
                          text-align: center;
                          color: #29ab56;
                        "
                        >Cập nhật thành công</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <div data-include-html="../../component/footer.html"></div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script type="module" src="../../src/js/scripts.js"></script>
</html>
