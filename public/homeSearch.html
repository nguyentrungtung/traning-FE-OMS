<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Search</title>
    <link rel="stylesheet" href="../src/css/style.css" />
    <link rel="stylesheet" href="../src/css/header.css" />
    <link rel="stylesheet" href="../src/css/footer.css" />
    <link rel="stylesheet" href="../src/css/homeSearch.css" />
    <link rel="stylesheet" href="../src/css/responsive-common.css" />
    <link rel="stylesheet" href="../src/css/responsive-homeSearch.css" />
  </head>
  <body>
    <script>
      let searchInput = "trái cây";
      // searchInput = "";
    </script>

    <!-- Header -->
    <div data-include-html="../component/header.html"></div>

    <!-- categories -->
    <div class="categories">
      <div class="commonCategory_main container-xxl">
        <div class="commonCategory_list"></div>
        <button class="previous">
          <img src="../assets/svg/previous.svg" alt="" />
        </button>
        <button class="next">
          <img src="../assets/svg/next.svg" alt="" />
        </button>
      </div>

      <script>
        const categories = document.querySelector(".commonCategory_list");
        const previous = document.querySelector(".previous");
        const next = document.querySelector(".next");
        const scrollAmount = 200; // Scroll by 200 pixels

        next.addEventListener("click", () => {
          categories.scrollBy({
            left: scrollAmount,
            behavior: "smooth", // Smooth scroll
          });
        });

        previous.addEventListener("click", () => {
          categories.scrollBy({
            left: -scrollAmount,
            behavior: "smooth", // Smooth scroll
          });
        });
      </script>
    </div>

    <!-- search result -->
    <main class="homeSearch">
      <!-- mobile search input -->
      <div class="mobile-search container-xxl">
        <button>
          <img src="../assets/svg/bx_arrow-back.svg" alt="" />
        </button>
        <div class="search-input">
          <img src="../assets/svg/icSearchmobile.svg" alt="" />
          <script>
            document.write(`
                <input type="text" value="${searchInput}" placeholder= "Nhập sản phẩm cần tìm kiếm...">
              `);
          </script>
        </div>

        <button class="btnOpenSidebar">
          <img src="../assets/svg/filterMobile.svg" alt="" />
        </button>
        <script>
          const btnOpenSidebar = document.querySelector(
            ".mobile-search .btnOpenSidebar"
          );
          btnOpenSidebar.addEventListener("click", () => {
            document.querySelector(".homeSearch .coatMobile").style.display =
              "block";
            document.querySelector(".homeSearch .sidebar").style.display =
              "block";

            setTimeout(() => {
              document.querySelector(".homeSearch .sidebar").style.transform =
                "translateX(0%)";
            }, 50);
          });
        </script>
      </div>
      <!--  mobile sort -->
      <div class="mobile-sort container-xxl">
        <script>
          let tmp1 = ["Liên quan", "Mới nhất", "Bán chạy"];
          for (let i = 0; i < tmp1.length; i++) {
            document.write(`
              <button class="">${tmp1[i]} </button>
              <span class="divideV"></span>
              `);
          }
        </script>
        <button class="cost">
          Giá
          <img src="../assets/svg/costUpDown.svg" alt="" />
        </button>
        <script>
          const mobileSortBtns = document.querySelector(".mobile-sort");
          const allbtn = mobileSortBtns.querySelectorAll("button");
          allbtn.forEach((item) => {
            item.addEventListener("click", () => {
              allbtn.forEach((item) => {
                item.classList.remove("active");
              });
              item.classList.add("active");
            });
          });
        </script>
      </div>
      <!-- container -->
      <div class="container-xxl d-flex">
        <!-- sidebar -->
        <section class="sidebar">
          <div class="filter">
            <!-- title -->
            <span class="filter-title">
              <button class="btnFilter">
                <img src="../assets/svg/filter.svg" alt="" />
              </button>
              <button class="btnClose">
                <img src="../assets/svg/closeButtonMobile.svg" alt="" />
              </button>
              <script>
                const handleCloseSidebar = () => {
                  document.querySelector(".homeSearch .sidebar").style.display =
                    "none";
                  document.querySelector(
                    ".homeSearch .sidebar"
                  ).style.transform = "translateX(100%)";
                  document.querySelector(
                    ".homeSearch .coatMobile"
                  ).style.display = "none";
                };
                const btnCloseSidebar = document.querySelector(
                  ".filter-title .btnClose"
                );
                btnCloseSidebar.addEventListener("click", handleCloseSidebar);
              </script>
              <span>Bộ lọc tìm kiếm</span>
            </span>

            <!-- category -->
            <div class="category">
              <span class="common-title">Danh mục</span>
              <div class="category-list">
                <span>Trái cây</span>
                <span>Thịt, trứng</span>
                <span>Rau, củ, quả</span>
                <span>Sữa, bơ, phô mai</span>
              </div>
            </div>
            <!-- span -->
            <div class="divideH"></div>
            <!-- transport -->
            <div class="transport">
              <span class="common-title">Phương thức vận chuyển</span>
              <div class="transport-list">
                <span><input type="checkbox" name="" id="" /> Hỏa tốc</span>
                <span><input type="checkbox" name="" id="" />Nhanh</span>
                <span><input type="checkbox" name="" id="" />Tiêu chuẩn</span>
              </div>
            </div>
            <!-- span -->
            <div class="divideH"></div>
            <!-- khoang gia -->
            <div class="price">
              <div class="common-title">Khoảng giá</div>
              <div class="price-filter">
                <input type="text" placeholder="Từ" />
                <input type="text" placeholder="Đến" />
              </div>
              <button class="apply">Áp dụng</button>
            </div>
            <!-- span -->
            <div class="divideH"></div>
            <!-- evaluate -->
            <div class="evaluate">
              <span class="common-title">Đánh giá</span>
              <div class="evaluate-list">
                <script>
                  for (let i = 5; i >= 1; i--) {
                    document.write(`
                        <div class="evaluate-item">
                          <div class="star">
                            ${'<img src="../assets/svg/starfull.svg" alt="">'.repeat(
                              i
                            )}
                            ${'<img src="../assets/svg/starEmpty.svg" alt="">'.repeat(
                              5 - i
                            )}
                          </div>
                          <span>${i !== 5 ? "từ" : ""} ${i} sao</span>
                        </div>
                      `);
                  }
                </script>
              </div>
            </div>
            <!-- span -->
            <div class="divideH"></div>
            <!-- trademark : thương hiệu-->
            <div class="trademark">
              <span class="common-title">Thương hiệu</span>
              <div class="trademark-list">
                <span><input type="checkbox" name="" id="" /> Hỏa tốc</span>
                <span><input type="checkbox" name="" id="" />Nhanh</span>
                <span><input type="checkbox" name="" id="" />Tiêu chuẩn</span>
              </div>
            </div>
            <!-- span -->
            <div class="divideH"></div>
            <!-- material: chất liệu -->
            <div class="material">
              <span class="common-title">Chất liệu</span>
              <div class="material-list">
                <script>
                  let arr = ["Đen", "Trắng", "Đỏ", "Xanh lá", "Cam"];
                  for (let i = 1; i <= 5; i++) {
                    document.write(`
                      <span><input type="checkbox" name="" id="" /> ${
                        arr[i - 1]
                      }</span>
                      `);
                  }
                </script>
              </div>
            </div>
            <!-- span -->
            <span class="divideH"></span>
            <!-- provider -->
            <div class="provider">
              <span class="common-title">Nhà cung cấp</span>
              <div class="provider-list">
                <script>
                  let prods = [
                    "Nhà cung cấp A",
                    "Nhà cung cấp B",
                    "Nhà cung cấp C",
                    "Nhà cung cấp D",
                  ];
                  for (let i = 1; i <= 4; i++) {
                    document.write(`
                      <span><input type="checkbox" name="" id="" /> ${
                        prods[i - 1]
                      }</span>
                      `);
                  }
                </script>
              </div>
            </div>
            <!-- span -->
            <span class="divideH"></span>
            <!-- clear filter -->
            <button class="clearFilter">Xóa tất cả bộ lọc</button>
          </div>
        </section>
        <!--  search-result -->
        <section class="search-result">
          <!-- title -->
          <span class="search-title"
            >Tìm kiếm kết quả cho:
            <span class="search-key">
              "
              <script>
                document.write("  " + searchInput);
              </script>
              "</span
            >
          </span>
          <!-- sort -->
          <div class="sort-by">
            <div class="options-list">
              <span class="title">Sắp xếp theo:</span>
              <button class="noibat">Nổi bật</button>
              <button class="moinhat">Mới nhất</button>
              <button class="banchay">Bán chạy</button>
              <button class="gia">
                Giá
                <img src="../assets/svg/Polygon 1.svg" alt="" />
              </button>
            </div>
            <div class="paginationNextPre">
              <span>1/200</span>
              <div>
                <img src="../assets/svg/chevron.right.svg" alt="" />
                <img src="../assets/svg/chevron.right2.svg" alt="" />
              </div>
            </div>
          </div>
          <!-- Products-list -->
          <div class="commonProductList"></div>

          <!-- notfound Product -->
          <div class="homeSearch_notfound">
            <img src="../assets/svg/notFoundproduct.svg" alt="" />
            <span>Không có sản phẩm phù hợp với nội dung tìm kiếm</span>
          </div>

          <!-- paggination -->
          <nav>
            <ul class="pagination">
              <li class="page-item">
                <a
                  class="page-link"
                  href="javascript:void(0)"
                  aria-label="Previous"
                >
                  <img src="../assets/svg/rightCr.svg" alt="" />
                </a>
              </li>
              <li class="page-item active">
                <a href="javascript:void(0)" class="page-link">1</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">2</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">3</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">4</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">5</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">...</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="javascript:void(0)">
                  <img src="../assets/svg/leftchevron.svg" alt="" />
                </a>
              </li>
            </ul>
          </nav>
        </section>

        <!-- coat sidebar mobile -->
        <div class="coatMobile"></div>
        <script>
          let coatMobile = document.querySelector(".coatMobile");
          coatMobile.addEventListener("click", handleCloseSidebar);
        </script>
      </div>
    </main>

    <!-- Footer -->
    <div data-include-html="../component/footer.html"></div>
  </body>

  <!--------------------------------------------------------------------------------------------------------------------------------------------- -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="../src/js/scripts.js"></script>
  <script type="module" src="../src/js/homelogin.js"></script>
  <script src="../src/js/createList.js"></script>
  <script>
    createListCategory();
    createcommonProductList(25);
    const ProductList = document.querySelector(".commonProductList");
    const categoriesElemnent = document.querySelector(".categories");
    const paginationElm = document.querySelector(".pagination");
    const notFoundElm = document.querySelector(".homeSearch_notfound");

    if (searchInput !== "") {
      ProductList.style.display = "grid";
      categoriesElemnent.style.display = "flex";
      paginationElm.style.display = "flex";
      notFoundElm.style.display = "none";
    } else {
      ProductList.style.display = "none";
      categoriesElemnent.style.display = "none";
      paginationElm.style.display = "none";
      notFoundElm.style.display = "flex";
    }
  </script>
</html>
